[build]
builder = "NIXPACKS"
buildCommand = "cd backend && pip install -r requirements.txt && pip install gunicorn whitenoise && python manage.py collectstatic --noinput && python manage.py migrate"

[deploy]
startCommand = "cd backend && gunicorn chemical_visualizer.wsgi:application --bind 0.0.0.0:$PORT"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[variables]
DJANGO_SETTINGS_MODULE = "chemical_visualizer.settings_prod"
ALLOWED_HOSTS = ".railway.app,localhost"
CORS_ALLOW_ALL = "true"
